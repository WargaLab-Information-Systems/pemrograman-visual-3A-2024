import java.awt.event.KeyEvent;
import javax.swing.JCheckBox;
import javax.swing.JOptionPane;
import javax.swing.table.DefaultTableModel;

/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 *
 * @author User
 */
public class SPP2 extends javax.swing.JFrame {
    private JCheckBox[] checkBoxesBulan;

    /**
     * Creates new form SPP2
     */
    public SPP2() {
        initComponents();
        TFtotal.setEditable(false);
        TFkembali.setEditable(false);
        checkBoxesBulan = new JCheckBox[] {
            januari, februari, maret, april, 
            mei, juni, juli, agustus, 
            september, oktober, november, desember
        };
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        panelJudul = new javax.swing.JPanel();
        labelAtas1 = new javax.swing.JLabel();
        labelAtas2 = new javax.swing.JLabel();
        logoUang = new javax.swing.JLabel();
        logoAnak = new javax.swing.JLabel();
        labelAtas3 = new javax.swing.JLabel();
        panelIsi = new javax.swing.JPanel();
        panelAwal = new javax.swing.JPanel();
        labelNama = new javax.swing.JLabel();
        TFnama = new javax.swing.JTextField();
        labelJumlah = new javax.swing.JLabel();
        TFjumlah = new javax.swing.JTextField();
        labelBulan = new javax.swing.JLabel();
        januari = new javax.swing.JCheckBox();
        februari = new javax.swing.JCheckBox();
        maret = new javax.swing.JCheckBox();
        april = new javax.swing.JCheckBox();
        mei = new javax.swing.JCheckBox();
        juni = new javax.swing.JCheckBox();
        juli = new javax.swing.JCheckBox();
        agustus = new javax.swing.JCheckBox();
        september = new javax.swing.JCheckBox();
        oktober = new javax.swing.JCheckBox();
        november = new javax.swing.JCheckBox();
        desember = new javax.swing.JCheckBox();
        btnHitung = new javax.swing.JButton();
        labelInfo = new javax.swing.JLabel();
        labelTotal = new javax.swing.JLabel();
        TFtotal = new javax.swing.JTextField();
        labelCash = new javax.swing.JLabel();
        labelKembali = new javax.swing.JLabel();
        TFcash = new javax.swing.JTextField();
        TFkembali = new javax.swing.JTextField();
        btnBayar = new javax.swing.JButton();
        tabel = new javax.swing.JScrollPane();
        tabel1 = new javax.swing.JTable();
        lblPeringatan = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        panelJudul.setBackground(new java.awt.Color(255, 153, 153));
        panelJudul.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        labelAtas1.setFont(new java.awt.Font("Tahoma", 2, 36)); // NOI18N
        labelAtas1.setText("Kemudahan Pembayaran untuk");
        panelJudul.add(labelAtas1, new org.netbeans.lib.awtextra.AbsoluteConstraints(90, 20, 530, 42));

        labelAtas2.setFont(new java.awt.Font("Tahoma", 3, 36)); // NOI18N
        labelAtas2.setText("Generasi EMAS");
        panelJudul.add(labelAtas2, new org.netbeans.lib.awtextra.AbsoluteConstraints(250, 60, 340, -1));

        logoUang.setIcon(new javax.swing.ImageIcon(getClass().getResource("/ImageSPP/logo2.png"))); // NOI18N
        panelJudul.add(logoUang, new org.netbeans.lib.awtextra.AbsoluteConstraints(620, 10, -1, -1));

        logoAnak.setIcon(new javax.swing.ImageIcon(getClass().getResource("/ImageSPP/logo1.png"))); // NOI18N
        panelJudul.add(logoAnak, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 70, -1, -1));

        labelAtas3.setFont(new java.awt.Font("Tahoma", 1, 36)); // NOI18N
        labelAtas3.setForeground(new java.awt.Color(255, 255, 255));
        labelAtas3.setText("AYO BAYAR SPP !");
        panelJudul.add(labelAtas3, new org.netbeans.lib.awtextra.AbsoluteConstraints(360, 110, -1, -1));

        getContentPane().add(panelJudul, java.awt.BorderLayout.PAGE_START);

        panelIsi.setBackground(new java.awt.Color(204, 204, 255));
        panelIsi.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        panelAwal.setBackground(new java.awt.Color(255, 204, 204));
        panelAwal.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        labelNama.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        labelNama.setText("NAMA");
        panelAwal.add(labelNama, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 30, -1, -1));

        TFnama.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        TFnama.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                TFnamaActionPerformed(evt);
            }
        });
        panelAwal.add(TFnama, new org.netbeans.lib.awtextra.AbsoluteConstraints(120, 20, 210, 30));

        labelJumlah.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        labelJumlah.setText("JUMLAH");
        panelAwal.add(labelJumlah, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 90, -1, -1));

        TFjumlah.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        TFjumlah.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                TFjumlahKeyTyped(evt);
            }
        });
        panelAwal.add(TFjumlah, new org.netbeans.lib.awtextra.AbsoluteConstraints(120, 80, 210, 30));

        labelBulan.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        labelBulan.setText("BULAN");
        panelAwal.add(labelBulan, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 140, -1, -1));

        januari.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        januari.setText("Januari");
        panelAwal.add(januari, new org.netbeans.lib.awtextra.AbsoluteConstraints(120, 140, -1, -1));

        februari.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        februari.setText("Februari");
        panelAwal.add(februari, new org.netbeans.lib.awtextra.AbsoluteConstraints(120, 190, -1, -1));

        maret.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        maret.setText("Maret");
        panelAwal.add(maret, new org.netbeans.lib.awtextra.AbsoluteConstraints(120, 240, -1, -1));

        april.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        april.setText("April");
        panelAwal.add(april, new org.netbeans.lib.awtextra.AbsoluteConstraints(120, 290, -1, -1));

        mei.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        mei.setText("Mei");
        panelAwal.add(mei, new org.netbeans.lib.awtextra.AbsoluteConstraints(120, 340, -1, -1));

        juni.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        juni.setText("Juni");
        panelAwal.add(juni, new org.netbeans.lib.awtextra.AbsoluteConstraints(120, 390, -1, -1));

        juli.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        juli.setText("Juli");
        panelAwal.add(juli, new org.netbeans.lib.awtextra.AbsoluteConstraints(230, 140, -1, -1));

        agustus.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        agustus.setText("Agustus");
        panelAwal.add(agustus, new org.netbeans.lib.awtextra.AbsoluteConstraints(230, 190, -1, -1));

        september.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        september.setText("September");
        panelAwal.add(september, new org.netbeans.lib.awtextra.AbsoluteConstraints(230, 240, -1, -1));

        oktober.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        oktober.setText("Oktober");
        panelAwal.add(oktober, new org.netbeans.lib.awtextra.AbsoluteConstraints(230, 290, -1, -1));

        november.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        november.setText("November");
        panelAwal.add(november, new org.netbeans.lib.awtextra.AbsoluteConstraints(230, 340, -1, -1));

        desember.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        desember.setText("Desember");
        panelAwal.add(desember, new org.netbeans.lib.awtextra.AbsoluteConstraints(230, 390, -1, -1));

        btnHitung.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        btnHitung.setIcon(new javax.swing.ImageIcon(getClass().getResource("/ImageSPP/button1.png"))); // NOI18N
        btnHitung.setText("HITUNG");
        btnHitung.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnHitungActionPerformed(evt);
            }
        });
        panelAwal.add(btnHitung, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 470, 290, 50));

        labelInfo.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        panelAwal.add(labelInfo, new org.netbeans.lib.awtextra.AbsoluteConstraints(40, 440, 270, 20));

        panelIsi.add(panelAwal, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 350, 530));

        labelTotal.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        labelTotal.setText("TOTAL");
        panelIsi.add(labelTotal, new org.netbeans.lib.awtextra.AbsoluteConstraints(450, 30, -1, -1));

        TFtotal.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                TFtotalKeyReleased(evt);
            }
        });
        panelIsi.add(TFtotal, new org.netbeans.lib.awtextra.AbsoluteConstraints(550, 20, 210, 30));

        labelCash.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        labelCash.setText("CASH");
        panelIsi.add(labelCash, new org.netbeans.lib.awtextra.AbsoluteConstraints(450, 80, -1, -1));

        labelKembali.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        labelKembali.setText("KEMBALI");
        panelIsi.add(labelKembali, new org.netbeans.lib.awtextra.AbsoluteConstraints(450, 130, -1, -1));

        TFcash.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        TFcash.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                TFcashKeyReleased(evt);
            }
            public void keyTyped(java.awt.event.KeyEvent evt) {
                TFcashKeyTyped(evt);
            }
        });
        panelIsi.add(TFcash, new org.netbeans.lib.awtextra.AbsoluteConstraints(550, 70, 210, 30));

        TFkembali.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        TFkembali.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                TFkembaliActionPerformed(evt);
            }
        });
        panelIsi.add(TFkembali, new org.netbeans.lib.awtextra.AbsoluteConstraints(550, 120, 210, 30));

        btnBayar.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        btnBayar.setIcon(new javax.swing.ImageIcon(getClass().getResource("/ImageSPP/button3.png"))); // NOI18N
        btnBayar.setText("BAYAR");
        btnBayar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnBayarActionPerformed(evt);
            }
        });
        panelIsi.add(btnBayar, new org.netbeans.lib.awtextra.AbsoluteConstraints(550, 200, 210, 50));

        tabel1.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
        tabel1.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null}
            },
            new String [] {
                "Nama", "Jumlah SPP", "Lunas", "Menunggak"
            }
        ));
        tabel1.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tabel1MouseClicked(evt);
            }
        });
        tabel.setViewportView(tabel1);

        panelIsi.add(tabel, new org.netbeans.lib.awtextra.AbsoluteConstraints(380, 290, -1, 190));

        lblPeringatan.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        panelIsi.add(lblPeringatan, new org.netbeans.lib.awtextra.AbsoluteConstraints(450, 170, 310, -1));

        getContentPane().add(panelIsi, java.awt.BorderLayout.CENTER);

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void TFnamaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_TFnamaActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_TFnamaActionPerformed

    private void TFtotalKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_TFtotalKeyReleased
        // TODO add your handling code here:
    }//GEN-LAST:event_TFtotalKeyReleased

    private void TFcashKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_TFcashKeyReleased
        // TODO add your handling code here:
        String cash = TFcash.getText();
        int cashInteger = Integer.parseInt(cash);
        
        String total = TFtotal.getText();
        int totalInteger = Integer.parseInt(total);
             
        if (cashInteger < totalInteger){
            lblPeringatan.setText("Harap masukkan total sesuai harga !!!!");
            return;
        }else{
            lblPeringatan.setText("");

        }
        
        TFkembali.setText(Integer.toString(cashInteger - totalInteger));
    }//GEN-LAST:event_TFcashKeyReleased

   
    private void btnBayarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnBayarActionPerformed
        // TODO add your handling code here:
        DefaultTableModel model = (DefaultTableModel) tabel1.getModel();

        if (!TFnama.getText().isEmpty() && !TFjumlah.getText().isEmpty() && !TFcash.getText().isEmpty()) {

            int total = Integer.parseInt(TFtotal.getText());
            int cash = Integer.parseInt(TFcash.getText());

            if (cash >= total) {
                int kembalian = cash - total;
                TFkembali.setText(Integer.toString(kembalian));

                StringBuilder lunasBulan = new StringBuilder();
                StringBuilder menunggakBulan = new StringBuilder();

               
                String[] namaBulan = {"Jan", "Feb", "Mar", "Apr", "Mei", "Jun", "Jul", "Agust", "Sept", "Okto", "Nov", "Des"};
                for (int i = 0; i < checkBoxesBulan.length; i++) {
                    if (checkBoxesBulan[i].isSelected()) {
                        lunasBulan.append(namaBulan[i]).append(", ");
                    } else {
                        menunggakBulan.append(namaBulan[i]).append(", ");
                    }
                }

                JOptionPane.showMessageDialog(this, "Pembayaran berhasil!", "Informasi", JOptionPane.INFORMATION_MESSAGE);

                Object[] row = {TFnama.getText(), TFtotal.getText(), lunasBulan.toString(), menunggakBulan.toString()};
                model.insertRow(0, row); 
                
                TFcash.setText("");
                labelInfo.setText("");
                TFkembali.setText("");
                TFtotal.setText("");
                TFnama.setText("");  
                TFjumlah.setText(""); 
                
                for (JCheckBox checkBox : checkBoxesBulan) {
                checkBox.setSelected(false);  
            }
            } 
//            else {
//                JOptionPane.showMessageDialog(this, "Pembayaran gagal, uang anda tidak cukup", "Peringatan", JOptionPane.ERROR_MESSAGE);
//            }
        } else {
            JOptionPane.showMessageDialog(this, "Harap lengkapi semua data!", "Peringatan", JOptionPane.WARNING_MESSAGE);
        }
    }//GEN-LAST:event_btnBayarActionPerformed

    private void TFkembaliActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_TFkembaliActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_TFkembaliActionPerformed

    private void btnHitungActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnHitungActionPerformed
        // TODO add your handling code here:
        int jumlahBulan = 0;
        for (JCheckBox checkBox : checkBoxesBulan) {
            if (checkBox.isSelected()) {
                jumlahBulan++;
            }
        }

        if (jumlahBulan == 0) { 
            labelInfo.setText("Harap pilih setidaknya satu bulan!");
            TFtotal.setText(""); 
            return;
        }

        if (TFnama.getText().isEmpty() || TFjumlah.getText().isEmpty()) {
            labelInfo.setText("Harap lengkapi nama dan jumlah SPP!");
            return;
        }

        String inputSPP = TFjumlah.getText();
        int jumlahSPP = Integer.parseInt(inputSPP);

        int total = jumlahSPP * jumlahBulan;
        TFtotal.setText(Integer.toString(total));
    }//GEN-LAST:event_btnHitungActionPerformed

    private void TFjumlahKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_TFjumlahKeyTyped
        // TODO add your handling code here:
        char c = evt.getKeyChar();
        if (!(Character.isDigit(c) || c == KeyEvent.VK_BACK_SPACE || c == KeyEvent.VK_DELETE)){
           evt.consume();
        }
    }//GEN-LAST:event_TFjumlahKeyTyped

    private void TFcashKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_TFcashKeyTyped
        // TODO add your handling code here:
        char c = evt.getKeyChar();
        if (!(Character.isDigit(c) || c == KeyEvent.VK_BACK_SPACE || c == KeyEvent.VK_DELETE)){
           evt.consume();
        }
    }//GEN-LAST:event_TFcashKeyTyped

    private void tabel1MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tabel1MouseClicked
        // TODO add your handling code here:
    }//GEN-LAST:event_tabel1MouseClicked

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(SPP2.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(SPP2.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(SPP2.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(SPP2.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new SPP2().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JTextField TFcash;
    private javax.swing.JTextField TFjumlah;
    private javax.swing.JTextField TFkembali;
    private javax.swing.JTextField TFnama;
    private javax.swing.JTextField TFtotal;
    private javax.swing.JCheckBox agustus;
    private javax.swing.JCheckBox april;
    private javax.swing.JButton btnBayar;
    private javax.swing.JButton btnHitung;
    private javax.swing.JCheckBox desember;
    private javax.swing.JCheckBox februari;
    private javax.swing.JCheckBox januari;
    private javax.swing.JCheckBox juli;
    private javax.swing.JCheckBox juni;
    private javax.swing.JLabel labelAtas1;
    private javax.swing.JLabel labelAtas2;
    private javax.swing.JLabel labelAtas3;
    private javax.swing.JLabel labelBulan;
    private javax.swing.JLabel labelCash;
    private javax.swing.JLabel labelInfo;
    private javax.swing.JLabel labelJumlah;
    private javax.swing.JLabel labelKembali;
    private javax.swing.JLabel labelNama;
    private javax.swing.JLabel labelTotal;
    private javax.swing.JLabel lblPeringatan;
    private javax.swing.JLabel logoAnak;
    private javax.swing.JLabel logoUang;
    private javax.swing.JCheckBox maret;
    private javax.swing.JCheckBox mei;
    private javax.swing.JCheckBox november;
    private javax.swing.JCheckBox oktober;
    private javax.swing.JPanel panelAwal;
    private javax.swing.JPanel panelIsi;
    private javax.swing.JPanel panelJudul;
    private javax.swing.JCheckBox september;
    private javax.swing.JScrollPane tabel;
    private javax.swing.JTable tabel1;
    // End of variables declaration//GEN-END:variables
}
